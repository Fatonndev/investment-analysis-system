# Программная система анализа и прогнозирования рентабельности инвестиций трубопрокатного завода

## Описание проекта

Данная система предназначена для анализа и прогнозирования рентабельности инвестиционных проектов трубопрокатного производства. Система позволяет собирать и обрабатывать финансово-экономические данные, рассчитывать ключевые показатели эффективности инвестиций, прогнозировать финансовую эффективность и визуализировать результаты.

## Функциональные возможности

### 1. Сбор и обработка данных
- Загрузка и хранение исторических и текущих данных о производстве
- Ввод информации о затратах (сырьё, энергоносители, логистика, заработная плата, амортизация)
- Учёт рыночных цен на готовую продукцию
- Управление типами продукции
- Ввод инвестиционных данных
- Возможность ручного ввода или импорта данных из Excel-файлов

### 2. Расчёт показателей рентабельности
- ROI (рентабельность инвестиций)
- NPV (чистая приведённая стоимость)
- IRR (внутренняя норма доходности)
- Срок окупаемости
- Анализ безубыточности
- Оценка чувствительности проекта к изменению ключевых параметров
- Поддержка различных сценариев анализа: оптимистичный, базовый, пессимистичный

### 3. Прогнозирование
- Построение прогноза выручки, себестоимости и прибыли
- Применение методов прогнозирования (линейная регрессия, скользящее среднее)
- Визуализация прогнозных сценариев: оптимистичный, базовый, пессимистичный
- Поддержка долгосрочного прогнозирования (до 3 лет вперед)

### 4. Визуализация
- Отображение динамики ключевых финансовых показателей
- Интерактивные диаграммы структуры затрат
- Сравнение план/факт
- Наглядное представление результатов прогноза
- Интерактивные графики сценарного анализа
- Визуализация денежных потоков проекта

### 5. Пользовательский интерфейс
- Управление проектами
- Управление типами продукции
- Простой и интуитивно понятный интерфейс
- Настройка параметров анализа
- Экспорт отчётов в форматы PDF и Excel

## Технические требования

- PHP 7.4 или выше
- MySQL 5.7 или выше
- Веб-сервер (Apache, Nginx)
- JavaScript (для интерактивности и визуализации)

## Установка

1. Скопируйте файлы проекта на веб-сервер
2. Настройте веб-сервер для использования папки проекта как корневой директории
3. Создайте базу данных MySQL
4. Обновите параметры подключения к базе данных в файле `config.php`
5. Откройте веб-браузер и перейдите на главную страницу проекта

## Структура проекта

```
/workspace/
├── index.php                  # Главная точка входа в приложение
├── config.php                 # Конфигурационный файл с настройками БД и приложения
├── init_db.php                # Инициализация базы данных
├── get_cashflow_data.php      # Получение данных денежного потока
├── calculate_metrics.php      # Расчет финансовых метрик
├── generate_report.php        # Генерация отчетов
├── css/                       # Стилевые файлы
│   └── style.css              # Основные стили приложения
├── js/                        # JavaScript файлы
│   └── main.js                # Основной скрипт
├── includes/                  # Включаемые PHP файлы
│   ├── database.php           # Класс для работы с базой данных MySQL
│   └── calculations.php       # Класс с методами для инвестиционного анализа
├── pages/                     # Страницы приложения
│   ├── dashboard.php          # Панель управления
│   ├── projects.php           # Управление проектами
│   ├── product_types.php      # Управление типами продукции
│   ├── data_input.php         # Ввод исходных данных
│   ├── analysis.php           # Страница анализа проектов
│   └── reports.php            # Страница отчетов
├── uploads/                   # Каталог для загрузки файлов
└── reports/                   # Каталог для сохранения отчетов
```

## Архитектура приложения

Проект построен по модульной архитектуре с четким разделением ответственности между компонентами:

### 1. Слой представления (Frontend)
- **HTML/CSS**: Структура и стилизация страниц
- **JavaScript**: Интерактивность и динамическое обновление данных
- **Chart.js**: Визуализация финансовых показателей и графиков

### 2. Слой бизнес-логики (Backend)
- **index.php**: Единая точка входа в приложение, маршрутизация запросов
- **includes/database.php**: Класс Database для взаимодействия с MySQL базой данных, включает:
  - Подключение к базе данных
  - Создание таблиц при первом запуске
  - Подготовленные выражения для предотвращения SQL-инъекций
  - Методы для выполнения запросов и получения данных
- **includes/calculations.php**: Класс InvestmentAnalysis с методами для инвестиционного анализа:
  - Расчет ROI, NPV, IRR, срока окупаемости
  - Анализ безубыточности
  - Чувствительностный анализ
  - Прогнозирование с использованием линейной регрессии и скользящей средней
  - Сценарный анализ (оптимистичный, базовый, пессимистичный)
  - Расчет денежных потоков проекта

### 3. Слой представления (Pages)
- **pages/dashboard.php**: Панель управления с обзорными данными
- **pages/projects.php**: Управление инвестиционными проектами
- **pages/product_types.php**: Управление типами продукции
- **pages/data_input.php**: Ввод исходных данных (производственные данные, затраты, цены)
- **pages/analysis.php**: Подробный анализ проектов с визуализацией
- **pages/reports.php**: Формирование отчетов

### 4. Слой данных
- **MySQL база данных**: Хранение информации о проектах, производственных данных, затратах и ценах
- Таблицы: projects, production_data, operational_costs, product_prices, investment_data, product_types

### 5. Конфигурация и вспомогательные файлы
- **config.php**: Настройки подключения к базе данных и глобальные константы
- **init_db.php**: Инициализация структуры базы данных
- **generate_report.php**: Генерация отчетов
- **calculate_metrics.php**: Расчет финансовых метрик
- **get_cashflow_data.php**: Получение данных денежного потока

## Используемые технологии

- PHP 7.4+ для серверной логики
- MySQL 5.7+ для хранения данных
- HTML5/CSS3/JavaScript ES6 для интерфейса
- Chart.js для визуализации данных
- MySQLi для безопасного взаимодействия с базой данных
- Bootstrap (через CDN) для адаптивного дизайна

## Особенности реализации

- Модульная архитектура с четким разделением ответственности между компонентами
- Без использования Composer - все зависимости встроены
- Адаптивный дизайн для разных устройств
- Обработка ошибок и валидация входных данных
- Защита от SQL-инъекций через подготовленные выражения
- Автоматическое создание необходимых таблиц базы данных при первом запуске
- Поддержка различных типов затрат: сырьё, энергоносители, логистика, заработная плата, амортизация
- Возможность анализа нескольких инвестиционных проектов одновременно
- Поддержка различных сценариев прогнозирования: оптимистичный, базовый, пессимистичный

## Дальнейшее развитие

Для полной реализации всех функций рекомендуется:
- Интеграция библиотек для работы с Excel (PhpSpreadsheet) для полного функционала импорта/экспорта
- Интеграция библиотек для генерации PDF (TCPDF или FPDF) для экспорта отчетов
- Добавление системы аутентификации и авторизации пользователей
- Реализация более сложных методов прогнозирования (машинное обучение)
- Добавление механизма резервного копирования данных
- Внедрение системы уведомлений и оповещений
- Реализация межпроектного анализа и сравнения