<?php
require_once '/workspace/includes/calculations.php';

// Создаем экземпляр класса
$analysis = new InvestmentAnalysis();

// Тестовые данные из вашего примера
$cashFlows = [
    0 => -22133834.12,
    1 => 261463641.25,
    2 => 259638123.5,
    3 => 278778925.4499999,
    4 => 272628994.99000007,
    5 => 240978710.69999993,
    6 => 219963125.29999995,
    7 => 258380038.83999994,
    8 => 258366913.74999988,
    9 => 222154039.95000005,
    10 => 265994803.3900001,
    11 => 277969617.64999986,
    12 => 240199795.79999995,
    13 => 247170236.57000005,
    14 => 269776992.1,
    15 => 225032022.45000005,
    16 => 293429491.0400001,
    17 => 243337880.70000005,
    18 => 233326783.60000014,
    19 => 219347389.43999994,
    20 => 286500241.79999995,
    21 => 204145603.35000002,
    22 => 241821563.36999992,
    23 => 276869846.29999995,
    24 => 277777073.5
];

echo "Тестируем расчет IRR с предоставленными денежными потоками:\n";
var_dump($cashFlows);

$irr = $analysis->calculateIRR($cashFlows);

if ($irr !== null) {
    echo "\nРассчитанный IRR: " . ($irr * 100) . "%\n";
} else {
    echo "\nНе удалось рассчитать IRR - отсутствуют как положительные, так и отрицательные значения\n";
}

// Также протестируем простой пример с известным результатом
$simpleCashFlows = [-100, 50, 60, 70];
$simpleIrr = $analysis->calculateIRR($simpleCashFlows);
echo "\nТест с простыми данными [-100, 50, 60, 70]: ";
if ($simpleIrr !== null) {
    echo ($simpleIrr * 100) . "%\n";
} else {
    echo "не удалось рассчитать\n";
}
?>